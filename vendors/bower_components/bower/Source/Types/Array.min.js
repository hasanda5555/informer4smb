atom.array={is:function(array){return Array.isArray(array)},range:function(from,to,step){from=Number(from);to=Number(to);step=Number(step);if(typeof from!="number")throw new TypeError("`from` should be number");if(typeof to!="number")throw new TypeError("`to` should be number");var increase=to>from,stepIncrease=step>0;if(!step){step=increase?1:-1}else if(increase!=stepIncrease){throw new RangeError("step direction is wrong")}var result=[];do{result.push(from);from+=step}while(increase?from<=to:from>=to);return result},from:function(item){if(item==null)return[];return!coreIsArrayLike(item)?[item]:Array.isArray(item)?item:slice.call(item)},pickFrom:function(args){var fromZeroArgument=args&&args.length==1&&coreIsArrayLike(args[0]);return atom.array.from(fromZeroArgument?args[0]:args)},fill:function(array,fill){array=Array.isArray(array)?array:new Array(Number(array));for(var i=array.length;i--;)array[i]=fill;return array},fillMatrix:function(width,height,fill){var array=new Array(height);while(height--){array[height]=Array.fill(width,fill)}return array},collect:function(source,props,defaultValue){var array=[],i=0,l=props.length,prop;for(;i<l;i++){prop=props[i];array.push(prop in source?source[prop]:defaultValue)}return array},create:function(length,callback,context){if(!coreIsFunction(callback)){throw new TypeError("callback should be function")}var array=new Array(Number(length));for(var i=0;i<length;i++){array[i]=callback.call(context,i,array)}return array},toHash:function(array){var hash={},i=0,l=array.length;for(;i<l;i++){hash[i]=array[i]}return hash},last:function(array){return array.length?array[array.length-1]:null},randomIndex:function(array){if(array.length==0)return null;return atom.number.random(0,array.length-1)},random:function(array,erase){if(array.length==0)return null;var index=atom.array.randomIndex(array);return erase?array.splice(index,1)[0]:array[index]},property:function(array,name){return array.map(function(elem){return elem!=null?elem[name]:null})},fullMap:function(array,fn,bind){var mapped=new Array(array.length);for(var i=0,l=mapped.length;i<l;i++){mapped[i]=fn.call(bind,array[i],i,array)}return mapped},contains:function(array,elem,fromIndex){return array.indexOf(elem,fromIndex)!=-1},include:includeUnique,erase:coreEraseAll,append:function(target,source){for(var i=1,l=arguments.length;i<l;i++)if(arguments[i]){target.push.apply(target,arguments[i])}return target},toKeys:function(value){var useValue=arguments.length==1,obj={};for(var i=0,l=this.length;i<l;i++)obj[this[i]]=useValue?value:i;return obj},combine:function(target,source){for(var i=0,l=source.length;i<l;i++){atom.array.include(target,source[i])}return target},pick:function(source){for(var i=0,l=source.length;i<l;i++){if(source[i]!=null)return source[i]}return null},invoke:function(array,context){var args=slice.call(arguments,2);if(typeof context=="string"){var methodName=context;context=null}return array.map(function(item){return item&&(methodName?item[methodName]:item).apply(methodName?item:context,args)})},shuffle:function(array){var tmp,moveTo,index=array.length;while(index--){moveTo=atom.number.random(0,index);tmp=array[index];array[index]=array[moveTo];array[moveTo]=tmp}return array},sortBy:function(array,method,reverse){var get=function(elem){return(coreIsFunction(elem[method])?elem[method]():elem[method])||0};var multi=reverse?-1:1;return array.sort(function($0,$1){var diff=get($1)-get($0);return diff?(diff<0?-1:1)*multi:0})},min:function(array){return Math.min.apply(null,array)},max:function(array){return Math.max.apply(null,array)},mul:function(array,factor){for(var i=array.length;i--;)array[i]*=factor;return array},add:function(array,number){for(var i=array.length;i--;)array[i]+=number;return array},sum:function(array){for(var result=0,i=array.length;i--;)result+=array[i];return result},product:function(array){for(var result=1,i=array.length;i--;)result*=array[i];return result},average:function(array){return array.length?atom.array.sum(array)/array.length:0},unique:function(array){return atom.array.combine([],array)},associate:function(array,keys){var i=0,obj={},length=array.length,isFn=coreIsFunction(keys),keysSource=isFn?array:keys;if(!isFn)length=Math.min(length,keys.length);for(;i<length;i++){obj[keysSource[i]]=isFn?keys(array[i],i):array[i]}return obj},clean:function(array){return array.filter(function(item){return item!=null})},empty:function(array){array.length=0;return array},clone:function(array){return atom.clone(array)},hexToRgb:function(array,asArray){if(array.length!=3)return null;var rgb=array.map(function(value){if(value.length==1)value+=value;return parseInt(value,16)});return asArray?rgb:"rgb("+rgb+")"},rgbToHex:function(array,asArray){if(array.length<3)return null;if(array.length==4&&array[3]==0&&!asArray)return"transparent";var hex=[],i=0,bit;for(;i<3;i++){bit=(array[i]-0).toString(16);hex.push(bit.length==1?"0"+bit:bit)}return asArray?hex:"#"+hex.join("")},reduce:function(array,callback,value){if(coreIsFunction(array.reduce))return array.reduce(callback,value);for(var i=0,l=array.length;i<l;i++)if(i in array){value=value===undefined?array[i]:callback.call(null,value,array[i],i,array)}return value},reduceRight:function(array,callback,value){if(coreIsFunction(array.reduceRight))return array.reduceRight(callback,value);for(var i=array.length;i--;)if(i in array){value=value===undefined?array[i]:callback.call(null,value,array[i],i,array)}return value}};